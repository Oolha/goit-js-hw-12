{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import Axios from 'axios';\n\nconst axios = Axios.create(\n    {\n        baseURL: 'https://pixabay.com/api/',\n        params: {\n            key: '44419663-0e2c09df92781957132f7cc0f',\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            per_page: 15,\n\n        }\n    });\n\n\nexport async function displayImage(image, currentPage) {\n    try {\n        const res = await axios.get('', {\n            params:\n            {\n                q: image,\n                page: currentPage,\n            }\n        })\n        return res.data;\n    } catch (error) {\n        iziToast.error({\n            message: \"Error!\",\n        })\n    }\n}\n\n\n\n\n","\nconst list = document.querySelector(\".image-list\");\n\nexport function renderImage(images) {\n    const markup = images.map((image) => {\n        return `\n    <li class=\"images-item\">\n    <a class=\"large-img-link\" href=\"${image.largeImageURL}\">\n    <img class=\"small-img-link\" src=\"${image.webformatURL}\" alt=\"${image.tags}\"></img>\n    <div class=\"image-box\">\n    <p class=\"img-list-item-text\">Likes: ${image.likes}</p>\n    <p class=\"img-list-item-text\">Views: ${image.views}</p>\n    <p class=\"img-list-item-text\">Comments: ${image.comments}</p>\n    <p class=\"img-list-item-text\">Downloads: ${image.downloads}</p>\n    </div>\n        </a>\n    </li>`;\n    }).join('');\n    list.insertAdjacentHTML('beforeend', markup);\n\n    return markup;\n}\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { displayImage } from \"./js/pixabay-api\";\nimport { renderImage } from \"./js/render-functions\";\n\nconst formSearch = document.querySelector(\".form-js\");\nconst inputSearch = document.querySelector(\".input-js\");\nconst list = document.querySelector(\".image-list\");\nconst loader = document.querySelector(\".loader\");\nconst btnLoadMore =document.querySelector(\".btn-load-more\")\n\nlet image = '';\nlet currentPage = 1;\nlet maxPage = 1;\nconst perPage = 15;\n\nlet lightbox = new SimpleLightbox('.image-list a', {\n  captions: true,\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250\n\n});\n\nformSearch.addEventListener('submit', async e => {\n    e.preventDefault();\n    image = inputSearch.value.trim();\n    currentPage = 1;\n    list.innerHTML = '';\n\n    showLoader();\n    hideLoadMore();\n\n    if (image === '') {\n        iziToast.warning({\n            title: 'Warning!',\n            message: \"Query must be field!\",\n            position: 'topRight',\n            backgroundColor: '#ef4040',\n            layout: 2,\n        })\n        hideLoader();\n        return;\n    }\n    try {\n        const data = await displayImage(image, currentPage);\n        maxPage = Math.ceil(data.totalHits / perPage);\n        if (maxPage === 0) {\n            iziToast.error({\n                title: \"Empty result\",\n                message: \"No images found!\"\n            });\n            \n            hideLoader();\n            updateBtnStatus();\n            return; \n        }\n        renderImage(data.hits);\n        lightbox.refresh();\n        \n    } catch(error) {\n        iziToast.error({\n            message: \"Error!\",\n        })\n    }\n    hideLoader();\n    updateBtnStatus();\n    e.target.reset();\n});\nbtnLoadMore.addEventListener('click', async () => {\n\n    currentPage++;\n    hideLoadMore();\n    showLoader();\n    try {\n        const data = await displayImage(image, currentPage);\n        renderImage(data.hits);\n        lightbox.refresh();\n        skipOldElem();\n    } catch(error) {\n        iziToast.error({\n            message: \"Error!\",\n        })\n    }\n    hideLoader();\n    updateBtnStatus();\n});\nfunction updateBtnStatus() {\n    if (currentPage >= maxPage) {\n        hideLoadMore();\n\n        if (maxPage !== 0) {\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n            })\n        }\n    } else {\n        showLoadMore();\n    }\n}\n\nfunction showLoadMore() {\n    btnLoadMore.classList.remove('hidden');\n}\nfunction hideLoadMore() {\n    btnLoadMore.classList.add('hidden');\n}\n\nfunction showLoader() {\n    loader.classList.remove('hidden');\n}\n\nfunction hideLoader() {\n    loader.classList.add('hidden');\n}\n\nfunction skipOldElem() {\n   const liElem = list.querySelector('.images-item');\n    if (liElem) {\n        const height = liElem.getBoundingClientRect().height;\n        window.scrollBy({\n            top: height * 2,\n            behavior: 'smooth',\n        });\n    }\n}\n\n "],"names":["axios","Axios","displayImage","image","currentPage","list","renderImage","images","markup","formSearch","inputSearch","loader","btnLoadMore","maxPage","perPage","lightbox","SimpleLightbox","e","showLoader","hideLoadMore","iziToast","hideLoader","data","updateBtnStatus","skipOldElem","showLoadMore","liElem","height"],"mappings":"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"}